<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Crecent</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link rel='stylesheet' type='text/css' media='screen' href='popup.css'>
    <script type='module' src='toggle.js'></script>
    <script type='module' src='card.js'></script>
    <script type='module' src='popup.js'></script>
    <script type='module' src='collapsible.js'></script>
</head>

<body>
    <div id="tab-buttons">
        <button class="tab active" data-tab="wallet">Wallet</button>
        <button class="tab" data-tab="about">About</button>
        <button class="tab" data-tab="config">Config</button>
    </div>
    <div id="tab-container">
        <div id="wallet" class="tab-content active-content">
            <h1>Wallet</h1>
            <hr>
            <div id="empty-wallet">
                <p>Your wallet is empty.</p>
                <p>Import a credential to get started.</p>
            </div>
            <div id="wallet-info">
                <!-- cards will be displayed here -->
            </div>
        </div>

        <div id="about" class="tab-content">
            <h1>About</h1>
            <hr>
            <p>Version <span id="version">0.1</span> (dev preview)</p>
            <p>This is a prototype browser extension for the Crescent framework.</p>
            <p>See the <a href="https://github.com/microsoft/crescent" target="_blank">project page</a>
                for details.</p>
        </div>

        <div id="config" class="tab-content">
            <h1>Config</h1>
            <hr>
            <span class="config-section-header">Client Helper</span>
            <p>Enter the URL of the Client Helper service.</p>
            <div class="config-setting">
                <span class="config-label">URL</span>
                <input type="text" id="client-helper-url" placeholder="Client Helper URL">
            </div>
            <br>
            <hr>
            <span class="config-section-header">Import Credential</span>
            <p>Enter the issuer domain and schema UID for the credential, then import the file.</p>
            <div class="config-setting">
                <span class="config-label">Domain</span>
                <input type="text" id="text-import-domain" placeholder="Issuer domain  (e.g., example.com)"
                    placeholder="example.com" title="Please enter a valid domain (e.g., example.com)">
            </div>
            <div class="config-setting">
                <span class="config-label">Schema</span>
                <select class="config-dropdown" id="dropdown-import-schema" name="dropdown">
                </select>
            </div>
            <div class="config-setting">
                <span class="config-label">Select file</span>
                <input type="button" class="config-button config-button-disabled" id="button-import-card"
                    value="File ..." title="Enter Domain URL before picking file" disabled>
            </div>
            <div id="firefox-note" style="display: none;">
                <span>
                    * Firefox has a known issue where opening the file picker control (File ... button) auto-closes
                    this popup window which prevents the selected file from being processed. See /client/README.md for
                    workaround to prevent auto-close.
                </span>
            </div>
            <input type="file" id="file-import-file" style="display: none;">

            <br>
            <hr>
            <div id="toggle-auto-open" style="display: none;">
                <span class="config-section-header">Options</span>
                <toggle-switch label="Auto open on disclosure request" id="toggleAutoOpenOnDisclosure"></toggle-switch>
            </div>
        </div>
    </div>

    <div id="overlay">
        <div id="error-dialog" class="dialog">
            <h2>Error</h2>
            <p id="error-overlay-message">An unexpected error has occurred. Please try again later.</p>
            <div class="button-container">
                <button id="error-overlay-button" class="config-button">Close</button>
            </div>
        </div>
        <div id="pick-dialog" class="dialog">
            <h2>Error</h2>
            <p id="pick-overlay-message">An unexpected error has occurred. Please try again later.</p>
            <div class="button-container">
                <button id="buttonA" class="config-button">Close</button>
                <button id="buttonB" class="config-button">Close</button>
            </div>
        </div>
    </div>

    <div id="close-popup" alt="close">
        <img src=" ../icons/x.svg" />
    </div>

</body>

</html>